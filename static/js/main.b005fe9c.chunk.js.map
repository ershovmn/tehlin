{"version":3,"sources":["panels/FirstLogin.js","panels/Persik.js","App.js","index.js","img/persik.png"],"names":["FirstLogin","React","Component","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","sendForm","state","firstName","length","lastName","groupID","console","log","fetch","method","headers","Accept","Content-Type","body","JSON","stringify","userid","userID","firstname","lastname","middlename","middleName","groupid","gender","then","data","json","fetchedUser","_this2","connect","sendPromise","app_id","action","params","amount","user_id","catch","error","last_name","setState","first_name","id","sex","_this3","react_default","a","createElement","es6","props","top","value","onChange","e","target","status","placeholder","size","onClick","App","go","activePanel","currentTarget","dataset","to","popout","panels_FirstLogin","send","ReactDOM","render","src_App","document","getElementById","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.b005fe9c.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nimport {View, Panel, FormLayout, Input, Select, Button} from '@vkontakte/vkui'\r\nimport connect from '@vkontakte/vk-connect'\r\n\r\nclass FirstLogin extends React.Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            firstName: '',\r\n            lastName: '',\r\n            middleName: '',\r\n            userID: null,\r\n            groupID: '',\r\n            gender: true,\r\n            fetchedUser: null\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        connect.sendPromise('VKWebAppOpenPayForm', {'app_id': 7156583, 'action': 'pay-to-user', 'params': {amount: 1, user_id: 188163112}})\r\n\t\t\t.then(data => {\r\n\t\t\t\tconsole.log(data)\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconsole.log(error)\r\n            })\r\n        \r\n        connect.sendPromise('VKWebAppGetUserInfo', {})\r\n\t\t\t.then(data => {\r\n                console.log(data)\r\n                //this.setState({ fetchedUser: data})\r\n                if(data.last_name === 'Мещерская') {\r\n                    data.last_name = 'Ерщерская'\r\n                }\r\n                if(data.last_name === 'Ершов') {\r\n                    data.last_name = 'Ерщерский'\r\n                }\r\n                this.setState({\r\n                    firstName: data.first_name,\r\n                    lastName: data.last_name,\r\n                    middleName: '',\r\n                    userID: data.id,\r\n                    groupID: '',\r\n                    gender: data.sex === 2,\r\n                })\r\n\t\t\t})\r\n\t\t\t.catch(error => {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t})\r\n    }\r\n\r\n    sendForm = () => {\r\n        if(!(this.state.firstName.length > 0 &&\r\n            this.state.lastName.length > 0 &&\r\n            this.state.groupID.length > 0)) {\r\n            return\r\n        } else {\r\n            console.log('hello')\r\n            fetch('http://localhost/api/v0/firstlogin', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Accept': 'application/json',\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    userid: this.state.userID,\r\n                    firstname: this.state.firstName,\r\n                    lastname: this.state.lastName,\r\n                    middlename: this.state.middleName,\r\n                    groupid: this.state.groupID,\r\n                    gender: this.state.gender\r\n                })\r\n            }).then(data => {\r\n                return data.json()\r\n            }).then(data => {\r\n                console.log(data)\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        console.log(this.state)\r\n        return (\r\n            <Panel id={this.props.id}>\r\n                <FormLayout>\r\n                    <Input \r\n                        top=\"Фамилия\"\r\n                        value={this.state.lastName}\r\n                        onChange={(e) => this.setState({lastName: e.target.value})}\r\n                        status={this.state.lastName.length > 0 ? 'valid' : 'error'}\r\n                    />\r\n                    <Input \r\n                        top=\"Имя\"\r\n                        value={this.state.firstName}\r\n                        onChange={(e) => this.setState({firstName: e.target.value})}\r\n                        status={this.state.firstName.length > 0 ? 'valid' : 'error'}\r\n                    />\r\n                    <Input \r\n                        top=\"Отчество\"\r\n                        value={this.state.middleName}\r\n                        onChange={(e) => this.setState({middleName: e.target.value})}\r\n                    />\r\n                    <Select value={this.state.gender ? \"m\" : \"f\"} top=\"Пол\" placeholder=\"\" onChange={(e) => this.setState({gender: e.target.value === \"m\"})}>\r\n                        <option value=\"m\">Мужской</option>\r\n                        <option value=\"f\">Женский</option>\r\n                    </Select>\r\n                    <Input \r\n                        top=\"Номер группы\"\r\n                        value={this.state.groupID}\r\n                        onChange={(e) => this.setState({groupID: e.target.value})}\r\n                        status={this.state.groupID.length > 0 ? 'valid' : 'error'}\r\n                    />\r\n                    <Button size=\"xl\" onClick={() => this.sendForm()}>Зарегистрироваться</Button>\r\n                </FormLayout>\r\n            </Panel>\r\n        )\r\n    }\r\n}\r\n\r\nexport default FirstLogin","import React from 'react';\nimport {Panel, PanelHeader, HeaderButton, platform, IOS} from '@vkontakte/vkui';\nimport persik from '../img/persik.png';\nimport './Persik.css';\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport connect from '@vkontakte/vk-connect'\n\nclass Persik extends React.Component {\n\tosname = platform();\n\n\tconstructor() {\n\t\tsuper()\n\t\tthis.state = {\n\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tconnect.send('VKWebAppGetGeodata', {})\n\t\tconnect.sendPromise('VKWebAppOpenPayForm', {'app_id': 7156583, 'action': 'pay-to-user', 'params': {amount: 1, user_id: 188163112}})\n\t\t\t.then(data => {\n\t\t\t\tconsole.log(data)\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.log(error)\n\t\t\t})\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Panel id={this.props.id}>\n\t\t\t\t<PanelHeader\n\t\t\t\t\tleft={<HeaderButton onClick={this.props.go} data-to=\"home\">\n\t\t\t\t\t\t{this.osname === IOS ? <Icon28ChevronBack/> : <Icon24Back/>}\n\t\t\t\t\t</HeaderButton>}\n\t\t\t\t>\n\t\t\t\t\tPersik\n\t\t\t\t</PanelHeader>\n\t\t\t\t<img className=\"Persik\" src={persik} alt=\"Persik The Cat\"/>\n\t\t\t</Panel>\n\t\t)\n\t}\n}\n\n\nexport default Persik;\n","import React from 'react';\nimport connect from '@vkontakte/vk-connect';\nimport { View, Panel, ScreenSpinner } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Home from './panels/Home';\nimport Persik from './panels/Persik';\n\nimport FirstLogin from './panels/FirstLogin'\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tactivePanel: 'firstlogin',\n\t\t\tfetchedUser: null,\n\t\t\tpopout: null,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tconnect.sendPromise('VKWebAppGetUserInfo', {})\n\t\t\t.then(data => {\n\t\t\t\tthis.setState({ fetchedUser: data})\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.log(error)\n\t\t\t})\n\t}\n\n\tgo = (e) => {\n\t\tthis.setState({ activePanel: e.currentTarget.dataset.to })\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<View activePanel={this.state.activePanel} popout={this.state.popout}>\n\t\t\t\t<Panel id='black'>\n\n\t\t\t\t</Panel>\n\t\t\t\t<FirstLogin id='firstlogin' />\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nexport default App;\n","import 'core-js/es6/map';\nimport 'core-js/es6/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vk-connect';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK App\nconnect.send('VKWebAppInit', {});\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT \n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n","module.exports = __webpack_public_path__ + \"static/media/persik.4e1ec840.png\";"],"sourceRoot":""}