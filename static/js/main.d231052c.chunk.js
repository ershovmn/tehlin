(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{133:function(e,t,a){e.exports=a(171)},171:function(e,t,a){"use strict";a.r(t);a(134),a(159);var n=a(0),s=a.n(n),o=a(16),r=a.n(o),l=a(13),i=a.n(l),c=a(28),u=a(29),m=a(31),h=a(30),d=a(32),p=a(6),g=(a(170),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).sendForm=function(){e.state.firstName.length>0&&e.state.lastName.length>0&&e.state.groupID.length>0&&(console.log("hello"),fetch("https://4239c859.ngrok.io/api/v0/firstlogin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userid:e.state.userID,firstname:e.state.firstName,lastname:e.state.lastName,middlename:e.state.middleName,groupid:e.state.groupID,gender:e.state.gender})}).then(function(e){return e.json()}).then(function(t){sessionStorage.setItem("token",t.token),e.props.go("home")}))},e.state={firstName:"",lastName:"",middleName:"",userID:null,groupID:"",gender:!0,fetchedUser:null},e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;i.a.sendPromise("VKWebAppGetUserInfo",{}).then(function(t){console.log(t),"\u041c\u0435\u0449\u0435\u0440\u0441\u043a\u0430\u044f"===t.last_name&&(t.last_name="\u0415\u0440\u0449\u0435\u0440\u0441\u043a\u0430\u044f"),"\u0415\u0440\u0448\u043e\u0432"===t.last_name&&(t.last_name="\u0415\u0440\u0449\u0435\u0440\u0441\u043a\u0438\u0439"),e.setState({firstName:t.first_name,lastName:t.last_name,middleName:"",userID:t.id,groupID:"",gender:2===t.sex})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this,t=this.state.firstName.length>0&&this.state.lastName.length>0&&this.state.groupID.length>0;return s.a.createElement(p.e,{id:this.props.id},s.a.createElement(p.f,null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),s.a.createElement("p",null,"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435!!!"),s.a.createElement("p",null,"\u0424\u0418\u041e \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u0441\u043b\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u043c\u043e\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u0430!"),s.a.createElement("p",null,'\u0414\u0430\u043d\u043d\u043e\u0435 \u0424\u0418\u041e \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u043e \u0432 \u043f\u043e\u043b\u0435 \u043e\u0442\u0447\u0435\u0442\u0430 "\u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043b"'),s.a.createElement(p.c,null,s.a.createElement(p.d,{top:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",value:this.state.lastName,onChange:function(t){return e.setState({lastName:t.target.value})},status:this.state.lastName.length>0?"valid":"error"}),s.a.createElement(p.d,{top:"\u0418\u043c\u044f",value:this.state.firstName,onChange:function(t){return e.setState({firstName:t.target.value})},status:this.state.firstName.length>0?"valid":"error"}),s.a.createElement(p.d,{top:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",value:this.state.middleName,onChange:function(t){return e.setState({middleName:t.target.value})}}),s.a.createElement(p.h,{value:this.state.gender?"m":"f",top:"\u041f\u043e\u043b",placeholder:"",onChange:function(t){return e.setState({gender:"m"===t.target.value})}},s.a.createElement("option",{value:"m"},"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"),s.a.createElement("option",{value:"f"},"\u0416\u0435\u043d\u0441\u043a\u0438\u0439")),s.a.createElement(p.d,{top:"\u041d\u043e\u043c\u0435\u0440 \u0433\u0440\u0443\u043f\u043f\u044b",value:this.state.groupID,onChange:function(t){return e.setState({groupID:t.target.value})},status:this.state.groupID.length>0?"valid":"error"}),s.a.createElement(p.a,{size:"xl",disabled:!t,onClick:function(){return e.sendForm()}},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))}}]),t}(s.a.Component)),f=a(76),v=a.n(f),E=a(77),b=a.n(E),k=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).state={activeStory:"home"},e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement(p.b,{id:this.props.id,activeStory:this.state.activeStory,tabbar:s.a.createElement(p.i,null,s.a.createElement(p.j,{onClick:function(){return e.setState({activeStory:"home"})},selected:"home"===this.state.activeStory,text:"Home"},s.a.createElement(v.a,null)),s.a.createElement(p.j,{onClick:function(){return e.setState({activeStory:"settings"})},selected:"settings"===this.state.activeStory,text:"Settings"},s.a.createElement(b.a,null)))},s.a.createElement(p.k,{id:"home",activePanel:"home"},s.a.createElement(p.e,{id:"home"},s.a.createElement(p.f,null,"Home"))),s.a.createElement(p.k,{id:"settings",activePanel:"settings"},s.a.createElement(p.e,{id:"settings"},s.a.createElement(p.f,null,"Settings"))))}}]),t}(s.a.Component),S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).go=function(e){a.setState({popout:null,activePanel:e})},a.state={activePanel:"black",fetchedUser:null,popout:s.a.createElement(p.g,null),token:null},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;i.a.sendPromise("VKWebAppGetUserInfo",{}).then(function(t){e.setState({fetchedUser:t}),fetch("https://4239c859.ngrok.io/api/v0/gettoken?userid=".concat(e.state.fetchedUser.id),{method:"GET"}).then(function(e){return e.json()}).then(function(t){t.token?(sessionStorage.setItem("token",t.token),e.setState({activePanel:"home",popout:null,token:t.token})):e.setState({activePanel:"firstlogin",popout:null})})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return console.log(this.state),s.a.createElement(p.k,{activePanel:this.state.activePanel,popout:this.state.popout},s.a.createElement(p.e,{id:"black"}," "),s.a.createElement(g,{id:"firstlogin",go:this.go}),s.a.createElement(k,{id:"home"}))}}]),t}(s.a.Component);i.a.send("VKWebAppInit",{}),r.a.render(s.a.createElement(S,null),document.getElementById("root"))}},[[133,1,2]]]);
//# sourceMappingURL=main.d231052c.chunk.js.map